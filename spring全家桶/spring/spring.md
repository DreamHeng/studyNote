# Spring

## 一.基本概念

​	Spring是一个轻量级框架。在Spring框架中，有两个核心的机制，是IOC和AOP。

### 1.IOC

​	IOC(**Inversion of Control**)，**控制反转**，是一种设计思想，通俗讲就是控制权的反转，在spring里面，指的是java对象的生命周期（创建、销毁等）控制权的反转。

​	在以往的java设计中，一个对象A引用了外部资源对象B，那么则由A在对象内部new一个B对象，B对象的整个生命周期的控制权是在A的手中，现在，IOC的概念就是A对象不再new一个B，而是交由Sping工厂容器创建，并控制B的整个生命周期，A不关心B何时创建、如何创建，只负责使用Spring工厂容器提供的B就ok了，这也是实现了A与B的解耦合，这就是Sping里面的IOC实现。

​	DI(**Dependency Injection**)，**依赖注入**，其实DI可以当做IOC的另一种角度的阐述，IOC是思想，DI则是IOC在Spring里面的具体实现。接上段描述，DI指的是被注入对象A依赖Spring工厂容器注入依赖资源B，也是提供了资源的重复利用，在java中可以理解为代码复用。DI在java的底层实现是反射。

​	Spring里面的注入方式其实就两种，一种是构造注入，一种是属性注入。构造注入是使用对象的有参构造方法创建对象，属性注入是使用对象的无参构造方法创建对象，然后使用setter方法进行属性注入。

自动装配和接口注入详情阐述（TODO）

### 2.AOP

​	AOP(**Aspect Oriented Programming**)，**面向切面编程**，是一种编程思想，是对OOP的一种补充，宗旨是面向横面编程，即利用“横切”技术，剖开封装好的对象，将额外的功能代码织入到这个对象中。

​	AOP在功能实现上将代码分为两种，一种是业务功能，一种是增强功能，业务功能是代码核心，负责程序业务的实现，增强功能则是对业务的补充实现的额外功能，这些增强功能的主要特点就是可重用性高。在程序中，单独书写业务功能和增强功能，然后在程序运行期间，利用动态代理技术，动态的将增强功能添加到业务功能中。

​	AOP的目的是为了将于业务无关的、可重用性高的代码封装起来，减少系统的重复性代码，实现高维护和高拓展。

​	AOP中有几个重要的概念：

- **Aspect(切面)**，指增强功能的具体实现；

- **JointPoint(连接点)**，需要增强功能的代码所在的点；

- **Advice(通知)**，实现功能增强的时机，如前置、环绕等；

- **Pointcut(切入点)**，对连接点进行拦截的定义。

​	AOP的实现流程：首先书写一个增强类，实现增强功能，在这个增强功能上定义通知类型，切入点，然后在需要增强功能的具体点定义连接点。在程序运行过程中，会利用动态代理技术生成一个动态代理类，该类在业务功能代码的基础上将切面根据通知方式织入到连接点，调业务功能类实际就是调这个动态代理类。

​	实现的场景如日志记录、事务控制、权限控制、性能记录等。

#### 2.1.Spring生成动态代理的两种方式

​	Spring中生成动态代理的方式有两种，一种是**JDK动态代理**，由java SDK提供，基于接口，Spring默认使用的是这个；一种是**CGLIB动态代理**，由第三方库cglib提供，基于继承，Spring boot默认使用的这个，在Spring中切换此种动态代理方式需要配置aop。









## 二.实际运用





## 三.深层探究